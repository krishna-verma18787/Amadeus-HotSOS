import{a as B}from"./chunk-F7BJHCOB.js";import{a as N,b as R,c as j}from"./chunk-CNGJ4UW6.js";import"./chunk-26UHM24F.js";import{a as L}from"./chunk-UJDEHUIQ.js";import{b as q}from"./chunk-TUA2I5ZM.js";import"./chunk-2I42IO6W.js";import{$ as E,A as o,D as b,J as c,K as p,L as V,N as y,O as T,P as k,Q as d,R as u,S as O,T as a,U as r,V as h,W as P,X as _,Y as H,Z as g,_ as Y,aa as l,ba as D,ca as f,ma as w,n as x,o as S,p as G,q as m,r as I,s as z,ta as A,u as v}from"./chunk-WGFYM5RO.js";import"./chunk-2NFLSA4Y.js";function U(n,i){if(n&1&&(a(0,"span",3),m(),a(1,"svg",18),h(2,"path",19),r(),l(3),r()),n&2){let t=g();o(3),f(" ",t.guest.vipLevel," ")}}function W(n,i){n&1&&(m(),a(0,"svg",20),h(1,"path",21)(2,"polyline",22),r(),l(3," In House "))}function J(n,i){n&1&&(m(),a(0,"svg",23),h(1,"circle",24)(2,"path",25),r(),l(3," Arriving "))}function K(n,i){n&1&&(m(),a(0,"svg",23),h(1,"circle",24)(2,"path",26),r(),l(3," Departing "))}function X(n,i){if(n&1&&(a(0,"span",17),m(),a(1,"svg",27),h(2,"path",28)(3,"circle",29)(4,"path",30),r(),l(5),r()),n&2){let t=g();o(5),f(" ",t.guest.group," ")}}function Z(n,i){if(n&1&&(a(0,"span",17),m(),a(1,"svg",27),h(2,"path",31)(3,"circle",32)(4,"path",33),r(),l(5),r()),n&2){let t=g();o(5),f(" ",t.guest.adults," ")}}function ee(n,i){if(n&1&&(a(0,"span",17),m(),a(1,"svg",27),h(2,"path",34)(3,"path",35),r(),l(4),r()),n&2){let t=g();o(4),f(" ",t.guest.children," ")}}function te(n,i){if(n&1&&(a(0,"span",17),m(),a(1,"svg",27),h(2,"path",36)(3,"path",37),r(),l(4),r()),n&2){let t=g();o(4),f(" ",t.guest.transfers," ")}}var M=class n{guest;cardClicked=new z;onCardClick(){this.cardClicked.emit(this.guest.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-guest-card"]],inputs:{guest:"guest"},outputs:{cardClicked:"cardClicked"},decls:27,vars:17,consts:[["role","button","tabindex","0",1,"guest-card",3,"click","keydown.enter","keydown.space"],[1,"guest-card__name-row"],[1,"guest-card__name"],[1,"guest-card__vip"],[1,"guest-card__room"],[1,"guest-card__meta-row"],[1,"guest-card__dates"],["width","13","height","13","viewBox","0 0 24 24","fill","none","stroke","#374151","stroke-width","1.8","stroke-linecap","round"],["d","M17 2v2M7 2v2"],["x","3","y","4","width","18","height","18","rx","2","stroke-linejoin","round"],["d","M3 10h18"],["d","M8 14h.01M12 14h.01M16 14h.01"],["width","13","height","13","viewBox","0 0 24 24","fill","none","stroke","#374151","stroke-width","1.8","stroke-linecap","round","stroke-linejoin","round"],["d","M1 4v6h6M23 20v-6h-6"],["d","M20.49 9A9 9 0 005.64 5.64L1 10M23 14l-4.64 4.36A9 9 0 013.51 15"],[1,"status-badge"],[1,"guest-card__pax-row"],[1,"pax-item"],["width","13","height","13","viewBox","0 0 24 24","fill","#f59e0b"],["d","M3 17l3-8 6 5 6-5 3 8H3z"],["width","13","height","13","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.8","stroke-linecap","round","stroke-linejoin","round"],["d","M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["points","9 22 9 12 15 12 15 22"],["width","13","height","13","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","9.5"],["d","M12 8l4 4-4 4M8 12h8"],["d","M12 8l-4 4 4 4M16 12H8"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","#374151","stroke-width","1.8","stroke-linecap","round","stroke-linejoin","round"],["d","M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"],["d","M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"],["cx","12","cy","7","r","4"],["d","M16 11l2 2 4-4"],["d","M9 11l3 3L22 4"],["d","M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"],["d","M8 3H5a2 2 0 00-2 2v3M21 8V5a2 2 0 00-2-2h-3M3 16v3a2 2 0 002 2h3M16 21h3a2 2 0 002-2v-3"],["d","M8 12h8M12 8l4 4-4 4"]],template:function(t,e){t&1&&(a(0,"div",0),H("click",function(){return e.onCardClick()})("keydown.enter",function(){return e.onCardClick()})("keydown.space",function(){return e.onCardClick()}),a(1,"div",1)(2,"span",2),l(3),r(),c(4,U,4,1,"span",3),r(),a(5,"div",4),l(6),r(),a(7,"div",5)(8,"span",6),m(),a(9,"svg",7),h(10,"path",8)(11,"rect",9)(12,"path",10)(13,"path",11),r(),a(14,"svg",12),h(15,"path",13)(16,"path",14),r(),l(17),r(),I(),a(18,"span",15),c(19,W,4,0),c(20,J,4,0),c(21,K,4,0),r()(),a(22,"div",16),c(23,X,6,1,"span",17),c(24,Z,6,1,"span",17),c(25,ee,5,1,"span",17),c(26,te,5,1,"span",17),r()()),t&2&&(o(3),D(e.guest.name),o(),p(e.guest.vipLevel?4:-1),o(2),D(e.guest.room),o(11),f(" ",e.guest.dateRange," "),o(),E("status-badge--inhouse",e.guest.status==="in-house")("status-badge--arriving",e.guest.status==="arriving")("status-badge--departing",e.guest.status==="departing"),o(),p(e.guest.status==="in-house"?19:-1),o(),p(e.guest.status==="arriving"?20:-1),o(),p(e.guest.status==="departing"?21:-1),o(2),p(e.guest.group?23:-1),o(),p(e.guest.adults?24:-1),o(),p(e.guest.children?25:-1),o(),p(e.guest.transfers?26:-1))},dependencies:[w],styles:["[_nghost-%COMP%]{display:block}.guest-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px 16px 14px;box-shadow:0 1px 4px #00000012;display:flex;flex-direction:column;gap:4px;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease}.guest-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 14px #0000001f}.guest-card[_ngcontent-%COMP%]:active{transform:scale(.995)}.guest-card__name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.guest-card__name[_ngcontent-%COMP%]{font-size:var(--font-size-lg);font-weight:var(--font-weight-bold);color:#111827}.guest-card__vip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;font-size:var(--font-size-md);font-weight:var(--font-weight-semibold);color:#374151}.guest-card__room[_ngcontent-%COMP%]{font-size:var(--font-size-md);color:#374151;font-weight:var(--font-weight-regular);margin-top:1px}.guest-card__meta-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:6px;flex-wrap:wrap}.guest-card__dates[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;font-size:var(--font-size-sm);color:#374151;font-weight:var(--font-weight-regular)}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);border-radius:4px;white-space:nowrap}.status-badge--inhouse[_ngcontent-%COMP%], .status-badge--arriving[_ngcontent-%COMP%], .status-badge--departing[_ngcontent-%COMP%]{color:#374151}.guest-card__pax-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:4px;flex-wrap:wrap}.pax-item[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;font-size:var(--font-size-sm);color:#374151;font-weight:var(--font-weight-medium)}"],changeDetection:0})};var ne=(n,i)=>i.id;function ie(n,i){n&1&&(d(0,"div",12),O(1,"div",13)(2,"div",14)(3,"div",15),u())}function oe(n,i){if(n&1&&(d(0,"div",10),l(1,"Loading guests\u2026"),u(),d(2,"div",11),y(3,ie,4,0,"div",12,V),u()),n&2){let t=g();o(3),T(t.skeletonRows)}}function ae(n,i){if(n&1){let t=P();d(0,"app-guest-card",17),_("cardClicked",function(s){S(t);let C=g(2);return G(C.openDetail(s))}),u()}if(n&2){let t=i.$implicit;k("guest",t)}}function re(n,i){if(n&1&&(d(0,"div",5),y(1,ae,1,1,"app-guest-card",16,ne),u()),n&2){let t=g();o(),T(t.guests())}}function se(n,i){if(n&1){let t=P();d(0,"app-quick-actions-sheet",18),_("closed",function(){S(t);let s=g();return G(s.fabSheetOpen.set(!1))}),u()}if(n&2){let t=g();k("items",t.fabActions)}}var F=class n{authService=x(q);guestsService=x(B);router=x(A);profileSvc=x(L);fabSheetOpen=v(!1);fabActions=[{title:"Add Guest Note",subtitle:"Capture requests and preferences."},{title:"Request Transfer",subtitle:"Move guest to another room."},{title:"Send Welcome Message",subtitle:"Share arrival instructions quickly."}];guests=v([]);loading=v(!0);refreshing=v(!1);pullDistance=v(0);pullThreshold=64;skeletonRows=[1,2,3];pullStartY=0;ngOnInit(){this.fetchGuests(!0)}fetchGuests(i=!1){i&&this.loading.set(!0),this.guestsService.getGuests().subscribe({next:t=>{this.guests.set(t),i&&this.loading.set(!1),this.refreshing()&&setTimeout(()=>this.refreshing.set(!1),350)},error:()=>{this.loading.set(!1),this.refreshing.set(!1)}})}onTouchStart(i){if(this.isOverlayGesture(i)){this.pullStartY=0;return}let t=this.getScroller();if(!t||t.scrollTop>0||this.loading()||this.refreshing()){this.pullStartY=0;return}this.pullStartY=i.touches[0]?.clientY??0}onTouchMove(i){if(!this.pullStartY||this.isOverlayGesture(i))return;let t=this.getScroller();if(!t||t.scrollTop>0)return;let s=(i.touches[0]?.clientY??this.pullStartY)-this.pullStartY;s<=0||(this.pullDistance.set(Math.min(90,s*.45)),i.preventDefault())}onTouchEnd(){this.pullDistance()>=this.pullThreshold&&!this.refreshing()&&(this.refreshing.set(!0),this.fetchGuests(!1)),this.pullDistance.set(0),this.pullStartY=0}getScroller(){return document.querySelector(".shell__content")}isOverlayGesture(i){let t=i.target;return t?!!t.closest(".qa-sheet, .sheet, .qa-backdrop, .backdrop, app-page-header, app-page-toolbar"):!1}openDetail(i){this.router.navigate(["/shell/guests",i])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-guests"]],decls:13,vars:13,consts:[[1,"g",3,"touchstart","touchmove","touchend","touchcancel"],["title","All Guests",3,"avatarClicked","showRolePill","showHelpIcon","showTitleChevron","avatarInitials"],["sortLabel","Sort by Guest Name",3,"filterClicked","sortClicked"],[1,"pull-refresh"],[1,"g__count"],[1,"g__list"],["aria-label","Open quick actions",1,"fab",3,"click"],["width","22","height","22","viewBox","0 0 24 24","fill","none"],["d","M12 5v14M5 12h14","stroke","currentColor","stroke-width","2.2","stroke-linecap","round"],["title","Guest Actions","subtitle","Access frequent guest workflows.",3,"items"],[1,"g__loading"],[1,"g__skeleton-list"],[1,"g__skeleton-card"],[1,"sk","sk--title"],[1,"sk","sk--line"],[1,"sk","sk--line","short"],[3,"guest"],[3,"cardClicked","guest"],["title","Guest Actions","subtitle","Access frequent guest workflows.",3,"closed","items"]],template:function(t,e){t&1&&(d(0,"div",0),_("touchstart",function(C){return e.onTouchStart(C)})("touchmove",function(C){return e.onTouchMove(C)})("touchend",function(){return e.onTouchEnd()})("touchcancel",function(){return e.onTouchEnd()}),d(1,"app-page-header",1),_("avatarClicked",function(){return e.profileSvc.open()}),u(),d(2,"app-page-toolbar",2),_("filterClicked",function(){return null})("sortClicked",function(){return null}),u(),d(3,"div",3),l(4),u(),d(5,"div",4),l(6),u(),c(7,oe,5,0),c(8,re,3,0,"div",5),d(9,"button",6),_("click",function(){return e.fabSheetOpen.set(!0)}),m(),d(10,"svg",7),O(11,"path",8),u()(),c(12,se,1,1,"app-quick-actions-sheet",9),u()),t&2&&(o(),k("showRolePill",!1)("showHelpIcon",!1)("showTitleChevron",!0)("avatarInitials",e.authService.userInitials()),o(2),Y("height",e.refreshing()?e.pullThreshold:e.pullDistance(),"px"),E("pull-refresh--ready",e.pullDistance()>=e.pullThreshold||e.refreshing()),o(),f(" ",e.refreshing()?"Refreshing guests\u2026":e.pullDistance()>=e.pullThreshold?"Release to refresh":"Pull to refresh"," "),o(2),f("",e.guests().length," guests"),o(),p(e.loading()||e.refreshing()?7:-1),o(),p(!e.loading()&&!e.refreshing()?8:-1),o(4),p(e.fabSheetOpen()?12:-1))},dependencies:[w,N,R,M,j],styles:['@charset "UTF-8";.g[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;background:var(--app-bg);font-family:inherit;padding-bottom:calc(88px + env(safe-area-inset-bottom,0px));position:relative}.pull-refresh[_ngcontent-%COMP%]{height:0;overflow:hidden;display:flex;align-items:center;justify-content:center;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--app-text-muted);transition:height .16s ease;background:color-mix(in srgb,var(--app-primary) 8%,var(--app-bg))}.pull-refresh--ready[_ngcontent-%COMP%]{color:var(--app-primary)}.g__count[_ngcontent-%COMP%]{padding:10px 16px 6px;font-size:var(--font-size-lg);font-weight:var(--font-weight-semibold);color:var(--app-text-muted)}.g__loading[_ngcontent-%COMP%]{padding:32px 16px;text-align:center;font-size:var(--font-size-md);color:#9ca3af}.g__skeleton-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:4px 12px 12px}.g__skeleton-card[_ngcontent-%COMP%]{background:var(--app-surface);border-radius:12px;padding:14px;box-shadow:0 1px 4px #00000012;display:flex;flex-direction:column;gap:8px}.sk[_ngcontent-%COMP%]{border-radius:8px;background:linear-gradient(90deg,#e5e7eb 25%,#f3f4f6 37%,#e5e7eb 63%);background-size:400% 100%;animation:_ngcontent-%COMP%_shimmer 1.2s linear infinite;height:14px}.sk--title[_ngcontent-%COMP%]{height:22px;width:56%}.sk--line[_ngcontent-%COMP%]{width:100%}.sk--line.short[_ngcontent-%COMP%]{width:74%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:100% 0}to{background-position:-100% 0}}.g__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:4px 12px 12px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:calc(76px + env(safe-area-inset-bottom,0px));right:20px;width:52px;height:52px;border-radius:50%;background:linear-gradient(145deg,#2563eb,#1d4ed8);border:1px solid rgba(255,255,255,.35);cursor:pointer;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 10px 24px #2563eb59;transition:transform .14s ease,box-shadow .14s ease;-webkit-tap-highlight-color:transparent}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 12px 30px #2563eb6b}.fab[_ngcontent-%COMP%]:active{transform:scale(.96)}'],changeDetection:0})};export{F as Guests};
